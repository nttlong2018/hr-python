<div class="col-md-12">
	<div class="tile">
		<div class="panel panel-default">
	  <div class="panel-heading">
		  <div class="row">
			  <div class="col-xs-9 col-sm-9 col-md-9 col-lg-10">
			  <h3>${get_app_res("Select customer")}</h3>
		  </div>
		  <div class="col-xs-3 col-sm-3 col-md-3 col-lg-2">
		  	<select class="form-control" name="" id="" ng-change="doLoadUsers()" ng-model="selectedCode">
						<option ng-repeat="p in listOfCustomers" value="{{p.code}}">{{p.name}}</option>

					</select>
		  </div>
		  </div>

	  </div>
	  <div class="panel-body">
			{{data}}
	  </div>
</div>
	</div>
</div>
<script>
	(function(scope){
	console.log(scope.$ws);
		scope.getListOfCustomers=function(){
				scope.$ws.api('${get_api_key("admin.api.customers/get_items")}').done()
				.then(function(res){
					scope.listOfCustomers=res;
					scope.$applyAsync();
				});
		}
		scope.getListOfCustomers();
		scope.doLoadUsers=function(){
			scope.$ws.api('${get_api_key("admin.api.customers/get_list_of_users_by_customer")}')
			.data({
				customerCode:scope.selectedCode
			})
			.done()
				.then(function(res){
					scope.data=res;
					scope.$applyAsync();
				});
		}
	});
</script>
