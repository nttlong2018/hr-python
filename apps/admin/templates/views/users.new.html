<div title="${get_global_res('Create new user')}">

        <div class="container-fluid dialog-form">
            <div class="row">
                 <div class="col-sm-4">
                <label>${get_global_res("Username")}</label>
            </div>
            <div class="col-sm-8">
                <input type="text" ng-model="model.username" class="form-control" ng-if="isNew">
                <span type="text" class="form-control" ng-if="!isNew">{{model.username}}</span>
            </div>
            </div>
            <div class="row" ng-if="isNew">
                 <div class="col-sm-4">
                <label>${get_global_res("Password")}</label>
            </div>
            <div class="col-sm-8">
                <input type="password" ng-model="model.password" class="form-control">
            </div>
            </div>
             <div class="row">
                 <div class="col-sm-4">
                <label>${get_global_res("Email")}</label>
            </div>
            <div class="col-sm-8">
                <input type="email" ng-model="model.email" class="form-control">
            </div>
            </div>
            <div class="row">
                 <div class="col-sm-4">
                <label>${get_global_res("Display name")}</label>
            </div>
            <div class="col-sm-8">
                <input type="text" ng-model="model.displayName" class="form-control">
            </div>
            </div>
            <div class="row">
                 <div class="col-sm-4">
                <label>${get_global_res("System admin")}</label>
            </div>
            <div class="col-sm-8">
                <input type="checkbox" ng-model="model.isSysAdmin" class="form-control">
            </div>

            </div>
            <div class="row">
                 <div class="col-sm-4">
                <label>${get_global_res("Is admin")}</label>
            </div>
            <div class="col-sm-8">
                <input type="checkbox" ng-model="model.isStaff" class="form-control">
            </div>

            </div>
            <div class="row">
                 <div class="col-sm-4">
                <label>${get_global_res("Description")}</label>
            </div>
            <div class="col-sm-8">
                <textarea ng-model="model.description" class="form-control">

                </textarea>
            </div>
            </div>
            <div class="row">
                <div class="col-sm-12">
                      <div class="btn-toolbar pull-right" role="toolbar" aria-label="">
                <div class="btn-group" role="group" aria-label="">
                    <button type="button" class="btn btn-primary" ng-click="doAction()">
                        <span ng-if="isNew">
                            ${get_global_res("Create")}
                        </span>
                        <span ng-if="!isNew">
                            ${get_global_res("Update")}
                        </span>
                    </button>
                </div>
                <div class="btn-group" role="group" aria-label="">
                    <button type="button" class="btn secondary" ng-click="$doClose()">${get_global_res("Close")}</button>

                </div>
            </div>
                </div>
            </div>


        </div>

</div>
<script>
    (function(scope,params){

        scope.model=params||{}
        scope.isNew=!angular.isDefined(params);
        scope.load=function(item){
            alert(item);
        }
        scope.doAction=function(){
            alert(scope.$parent.view_path)
            if(scope.isNew){
                ws_call("admin.api.users/create",scope.model).then(function(res){
                    scope.data=res;
                    console.log(res);
                    scope.$applyAsync();
                })
                .catch(function(ex){
                    console.log(ex);
                })
           }
           else{
                ws_call("admin.api.users/update",scope.model).then(function(res){
                    scope.data=res;
                    console.log(res);
                    scope.$applyAsync();
                })
                .catch(function(ex){
                    console.log(ex);
                })
           }
        }
    })
</script>